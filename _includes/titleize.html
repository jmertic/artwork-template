{% assign small_words = "a an and as at but by for in nor of on or the to via vs with" | split: " " %}
{% assign words = include.text | replace: "_", " " | split: " " %}

{% for word in words %}
  {% assign lw = word | downcase %}
  {% if forloop.first or forloop.last or small_words contains lw %}
    {{ lw | capitalize }}
  {% else %}
    {{ lw }}
  {% endif %}
  {% unless forloop.last %} {% endunless %}
{% endfor %}

